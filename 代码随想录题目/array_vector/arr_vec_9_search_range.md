# åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½® â€” search range

- **é¢˜ç›®ï¼ˆLeetCode 34ï¼‰**ï¼š [ğŸ”— é¢˜ç›®](https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array/)  
- **éš¾åº¦**ï¼šä¸­ç­‰
- **è§£æ / å­¦ä¹ é“¾æ¥**ï¼š  
  - [ğŸ§  æ–‡å­—è§£æï¼ˆä»£ç éšæƒ³å½•ï¼‰](https://programmercarl.com/0034.%E5%9C%A8%E6%8E%92%E5%BA%8F%E6%95%B0%E7%BB%84%E4%B8%AD%E6%9F%A5%E6%89%BE%E5%85%83%E7%B4%A0%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%92%8C%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E4%BD%8D%E7%BD%AE.html#%E6%80%9D%E8%B7%AF) 
  -  [ğŸ§  è§†é¢‘è§£æï¼ˆçµèŒ¶å±±è‰¾åºœï¼‰ï¼Œ æ¨èè§‚çœ‹](https://www.bilibili.com/video/BV1AP41137w7/?vd_source=7923b10dbf11c28879c337d8e0bfa8de)
 

---

## å…³é”®ç‚¹ï¼ˆç²¾ç®€ï¼‰


1. **å¯»æ‰¾å·¦è¾¹ç•Œ (Lower Bound)**
* **æ ¸å¿ƒé€»è¾‘**ï¼š
    * æˆ‘ä»¬æ ¸å¿ƒé€»è¾‘å°±æ˜¯æ‰¾ç¬¬ä¸€ä¸ª**å¤§äºæˆ–ç­‰äº**`target`å…ƒç´ 
    * `nums[mid] == target` æ—¶ï¼Œæˆ‘ä»¬ä¸æ»¡è¶³ï¼Œæˆ‘ä»¬è¦æ‰¾æ›´é å·¦çš„ã€‚
    * å› ä¸ºåœ¨`mid`çš„å·¦è¾¹æœ‰å¯èƒ½è¿˜æœ‰ç­‰äº`target`çš„å…ƒç´ 
    * æ‰€ä»¥è®© `high = mid`ï¼ŒæŠŠåŒºé—´å‘å·¦å‹ç¼©ã€‚
    * å› æ­¤ `nums[mid]`å¤§äºæˆ–ç­‰äº` target`æ—¶éƒ½æ˜¯å‘å·¦å‹ç¼©ï¼š
        * `if (nums[mid] >= target) high = mid;`
* **ç»“æœ**ï¼š
    * å¾ªç¯ç»“æŸæ—¶ï¼Œ`low`å’Œ`high`éƒ½æ˜¯æŒ‡çš„åŒä¸€ä¸ªä½ç½®
    * éƒ½æ˜¯ç¬¬ä¸€ä¸ª**å¤§äºæˆ–ç­‰äº** `target` çš„ä½ç½®ã€‚


2. **å¯»æ‰¾å³è¾¹ç•Œ (å·§å¦™è½¬åŒ–)**
* å³è¾¹ç•Œä»£è¡¨ç€ç¬¬ä¸€ä¸ªå¤§äº`target`çš„å…ƒç´ çš„å…ƒç´ çš„ä½ç½®-1
* ä½†æ˜¯æˆ‘ä»¬æ²¡å¿…è¦å†å»å†™ä¸€ä¸ªæ£€æŸ¥ç¬¬ä¸€ä¸ªå¤§äº`target`çš„å…ƒç´ 
* **æŠ€å·§**ï¼š
    * å¤ç”¨ä¹‹å‰çš„å‡½æ•°å¯»æ‰¾ç¬¬ä¸€ä¸ªå¤§äºæˆ–ç­‰äº`target+1`çš„å…ƒç´ 
    * æ‰€æ‰¾åˆ°ç›®æ ‡ä½ç½®ä¸€å®šå°±æ˜¯`target`å³è¾¹ç•Œçš„ä¸‹ä¸€ä¸ªä½ç½®
* **å®ç°**ï¼šç›´æ¥è°ƒç”¨ `lowerbound(target + 1) - 1`ã€‚



---

### å¿…é¡»æ³¨æ„çš„ 2 ä¸ªç»†èŠ‚

å³ä½¿æ€è·¯å¯¹äº†ï¼ŒäºŒåˆ†æŸ¥æ‰¾ä¹Ÿå¸¸å› ä¸ºç»†èŠ‚æŒ‚æ‰ã€‚è¯·è®°ä½è¿™ä¸‰ä¸ªæ£€æŸ¥ç‚¹ï¼š

#### 1. åŒºé—´å®šä¹‰çš„ä¸€è‡´æ€§

æˆ‘ä½¿ç”¨çš„æ˜¯ **å·¦é—­å³å¼€** `[low, high)` é£æ ¼ï¼š

* åˆå§‹åŒ–ï¼š`high = nums.size()`ï¼ˆå› ä¸ºå–ä¸åˆ° `nums.size()`ï¼‰ã€‚
* å¾ªç¯æ¡ä»¶ï¼š`low < high`ï¼Œ`low == high`æ—¶å°±ä¼šç»“æŸ
* äºŒåˆ†æŸ¥æ‰¾æ›´æ–°çš„ä¸¤ç§å½¢æ€ï¼š

    | éœ€æ±‚ | åˆ¤å®šé€»è¾‘ (å½“ `nums[mid] == target` æ—¶) | æœ€ç»ˆ `low` çš„ä½ç½® |
    | --- | --- | --- |
    | **æ‰¾å·¦è¾¹ç•Œ** | `high = mid` (å‘å·¦çœ‹) | ç¬¬ä¸€ä¸ª $\ge$ target çš„å…ƒç´  |
    | **æ‰¾å³è¾¹ç•Œ** | `low = mid + 1` (å‘å³çœ‹) | ç¬¬ä¸€ä¸ª $>$ target çš„å…ƒç´  |


#### 2. è¾¹ç•Œå’Œç‰¹æ®Šæƒ…å†µçš„æ£€æŸ¥



è¿™æ˜¯**æ•™ç§‘ä¹¦çº§**çš„å¤„ç†æ–¹å¼ï¼š
* å½“`target` æ¯”æ•°ç»„é‡Œæ‰€æœ‰æ•°éƒ½å¤§çš„æ—¶å€™ï¼Œæœ€å`low`å’Œ`high`ä¸¤ä¸ªæŒ‡é’ˆéƒ½ä¼šæŒ‡å‘`nums.size()`ï¼Œä¹Ÿå°±æ˜¯å°¾åä½ç½®ã€‚
* è¿™æ ·ä¼šæœ‰è¶Šç•Œé£é™©ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ£€æŸ¥ï¼š
    * `low == nums.size()`

* å½“ `target` ä¸åœ¨æ•°ç»„ä¸­ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ£€æŸ¥æŒ‡é’ˆæ˜¯å¦æŒ‡å‘çš„æ˜¯`target`ï¼š
    * `nums[low] != target`ï¼š

---
## ä»£ç å®ç°

```cpp
class Solution {
public:
    vector<int> searchRange(vector<int>& nums, int target) {
        
        int low = lowerbound(nums, target); 
        
        if ( low == nums.size() || nums[low] != target ) return {-1, -1}; 
        //å¦‚æœèƒ½é€šè¿‡é‚£ä¹ˆä¸€å®šå­˜åœ¨low, high
        int high = lowerbound(nums, target+1) -1; 

        return {low, high};

    }

private:

    int lowerbound(vector<int> &nums, int target){

        int low = 0, high = nums.size(); 

        while (low < high){

            int mid = (high - low)/2 + low; 
            if (target > nums[mid]) low = mid + 1; //å»[low, mid] ç»§ç»­æœç´¢
            else high = mid; //nums[mid] < target, é‚£ä¹ˆå·¦è¾¹æ— æ„ä¹‰, å»[mid+1, high]

        }

        return low;  

    }

};
```
